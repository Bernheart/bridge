// ignore_for_file: constant_identifier_names

import 'package:bridge_game/bridge_game.dart';

enum BoardVulnerability {
  none([]),
  NS([PairDirection.NS]),
  EW([PairDirection.EW]),
  both([PairDirection.EW, PairDirection.NS]);

  final List<PairDirection> pairDirections;

  const BoardVulnerability(this.pairDirections);

  @override
  String toString({FileEncoding encoding = FileEncoding.pbn}) {
    return encoding.boardVulnerabilityNames[this]!;
  }

  factory BoardVulnerability.fromFixedBoardNumber(int boardNumber) {
    boardNumber = (boardNumber - 1) % 4 + 1;
    switch (boardNumber) {
      case 1:
        return BoardVulnerability.none;
      case 2:
        return BoardVulnerability.NS;
      case 3:
        return BoardVulnerability.EW;
      default:
        return BoardVulnerability.both;
    }
  }

  factory BoardVulnerability.fromBoardNumber(int boardNumber) {
    int sequenceShift = ((boardNumber - 1) ~/ 4);
    int boardIndex = (boardNumber + sequenceShift - 1) % 4 + 1;
    return BoardVulnerability.fromFixedBoardNumber(boardIndex);
  }
}
